{% extends "base.html" %}

{% block title %}{{ post.titulo }}{% endblock %}

{% block content %}
<div class="container my-5">
    <h1>{{ post.titulo }}</h1>
    <p class="text-muted">Por {{ post.autor.name }} - {{ post.fecha_create.strftime('%d/%m/%Y %H:%M') }}</p>
    <hr>
    <h3>{{ post.contenido }}</h3>

    <hr>

    <h4>Comentarios</h4>

    {% if comentarios %}
        <ul class="list-group mb-4">
        {% for comentario in comentarios %}
            <li class="list-group-item">
            <strong>{{ comentario.autor.name }}</strong> dijo:
            <p>{{ comentario.texto }}</p>
            <small class="text-muted">{{ comentario.fecha_create.strftime('%d/%m/%Y %H:%M') }}</small>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No hay comentarios aún.</p>
    {% endif %}

    <hr>

    {% if session.get('user_id') %}
        <form method="POST">
        <div class="mb-3">
            <textarea name="texto" id="texto" rows="3" class="form-control" placeholder="Agregá un comentario" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Comentar</button>
        </form>
    {% else %}
        <p><a href="{{ url_for('login') }}">Iniciá sesión</a> para poder comentar.</p>
    {% endif %}
</div>
{% endblock %}
